
    <title>Registro</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="/public/css/registerStyle.css">
</head>
<body>
<header>
    <a href="/paginaPrincipal" class="link"><h2>PREGUNTADOS</h2></a>
    <nav>
        <a href="/paginaPrincipal">Pagina principal</a>
        <a href="/login/loginForm">Iniciar sesion</a>
        <a href="#">Soporte</a>
    </nav>
</header> 

<main>
    <div class="form-container">
        {{#error}}
            <div class="error-message">{{error}}</div>
        {{/error}}
        <h1>Crear cuenta</h1>
        <form method="POST" action="/register/register" enctype="multipart/form-data">

            <p><input type="text" name="nombre_completo" placeholder="Nombre completo" required></p>
            <p> <input type="date" name="anio_nacimiento" required min="{{minDate}}" max="{{maxDate}}"></p>
            <p>
                <label>Sexo:</label><br>
                <label><input type="radio" name="sexo" value="Masculino" > Masculino</label>
                <label><input type="radio" name="sexo" value="Femenino"> Femenino</label>
                <label><input type="radio" name="sexo" value="Prefiero no cargarlo"> Prefiero no cargarlo</label>
            </p>

            <p><input type="text" name="pais" placeholder="País" id="pais" required disabled></p>
            <p><input type="text" name="ciudad" id="ciudad" placeholder="Ciudad" required disabled></p>
            <p><input type="text" name="usuario" placeholder="Nombre de usuario" required></p>
            <p><input type="email" name="mail" placeholder="Email" required></p>
            <p><input type="password" name="password1" placeholder="Contraseña" required></p>
            <p><input type="password" name="password2" placeholder="Confirmar contraseña" required></p>

            <p>
                <label>Foto de perfil:</label><br>
                <input type="file" name="foto_perfil" accept="image/*">
            </p>

            <input type="submit" value="Registrarse">
        </form>
    </div>

    <div class="mapaS">
        <h3>Si querés, podés seleccionar tu ubicación en el mapa</h3>
        <div id="mapa"></div>
        <input type="hidden" name="latitud" id="latitud">
        <input type="hidden" name="longitud" id="longitud">
    </div>
</main>

<script>
    const mapa = L.map('mapa').setView([-34.6037, -58.3816], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(mapa);

    let marcador;
        mapa.on('click', function(e) { 
            var lat = e.latlng.lat.toFixed(3);
            var lng = e.latlng.lng.toFixed(3);
            if (marcador) mapa.removeLayer(marcador);
            marcador = L.marker([lat, lng]).addTo(mapa);
            /*
            document.getElementById('latitud').value = lat;
            document.getElementById('longitud').value = lng;
            document.getElementById('ciudad').value = `Lat: ${lat}, Lng: ${lng}`;//})*/

            fetch('/mapa/obtenerCiudadYPais', {  
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ lat: lat, lng: lng })
            }) 
            .then(respuesta => respuesta.json())
            .then(ubicacion =>{
                var pais= document.getElementById('pais');
                pais.value=ubicacion.pais;

                var provincia= document.getElementById('ciudad');
                provincia.value=ubicacion.provincia;
            })


            })
        
</script>


