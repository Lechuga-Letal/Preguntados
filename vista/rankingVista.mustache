<title>Ranking</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="/public/css/vistas/rankingStyle.css">
<link rel="stylesheet" href="/public/css/componentes/headerComponente.css">
</head>

<body>
  <header class="header"> 
    <h2 class="titulo">Preguntados</h2>
    <div class="user-info">
        <form method="POST" action="/Preguntados/inicio/logout">
        <input class="logout-btn" type="submit" value="Cerrar sesión">
        </form>
        <p class="username">{{usuario}}</p>

        <a href="/perfil">
        {{#foto_perfil}}
                <img src="/{{foto_perfil}}" alt="{{usuario}}" class="img-fluid rounded-circle" width="50" height="50">
            {{/foto_perfil}}
            {{^foto_perfil}}
                <img src="/public/imagenes/usuarioImagenDefault.png" alt="{{usuario}}" class="img-fluid rounded-circle" width="50" height="50">
            {{/foto_perfil}}
        </a>
    </div>
  </header>

  <main class="container py-5">
    <div class="text-center mb-5">
      <h1 class="fw-bold">Ranking</h1>
      <p class="text-muted">
        Bienvenido al ranking!
      </p>
    </div>

  <form id="rankingForm" action="/ranking/obtenerListaMejoresJugadoresPorRango" method="GET">

      <div class="container mt-4">
        <h3 class="text-light mb-3">Ranking de usuarios</h3>
        <input type="hidden" name="rango" id="rango" value="pro">
        <input type="button" class="btn btn-light mb-3" value="rango pro" onclick="cambiarRango('pro')">
        <input type="button" class="btn btn-light mb-3" value="rango medio" onclick="cambiarRango('medio')">
        <input type="button" class="btn btn-light mb-3" value="rango novato" onclick="cambiarRango('novato')">
      </div>
      
      <div>
        <select name="limite" onchange="document.getElementById('rankingForm').submit()">
          <option value="10">filtro</option>
          <option value="1">1</option>
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>  
      </div>
    </form>


      <form id="rankingCategoriaForm" action="/ranking/obtenerListaMejoresJugadoresPorCategoria" method="GET">

      <div class="container mt-4">
        <h3 class="text-light mb-3">Ranking de usuarios categoria</h3>
        <input type="hidden" name="categoria" id="categoria" value="Historia">
        <input type="button" class="btn btn-light mb-3" value="Historia" onclick="cambiarCategoria('Historia')">
        <input type="button" class="btn btn-light mb-3" value="Deportes" onclick="cambiarCategoria('Deportes')">
        <input type="button" class="btn btn-light mb-3" value="Entretenimiento" onclick="cambiarCategoria('Entretenimiento')">
        <input type="button" class="btn btn-light mb-3" value="Informática" onclick="cambiarCategoria('Informática')">
        <input type="button" class="btn btn-light mb-3" value="Matematicas" onclick="cambiarCategoria('Matematicas')">
      </div>
      
      <div>
        <select name="limite" onchange="document.getElementById('rankingCategoriaForm').submit()">
          <option value="1">1</option>
          <option value="5">5</option>
          <option value="10" selected>10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>  
      </div>
    </form>
    <script>

    function cambiarRango(rango) {
      document.getElementById('rango').value = rango;
      document.getElementById('rankingForm').submit();
    }

    function cambiarCategoria(categoria) {
      document.getElementById('categoria').value = categoria;
      document.getElementById('rankingCategoriaForm').submit();
    }
    </script>


    

    {{#usuarios}}
    <div class="card text-light mb-2 p-3 rounded-3 shadow-sm">
        <a class="row align-items-center">
            <div class="col-md-3">
                <!--Lo comento porque se le esta asignando la misma foto que al usuario logueado -->
<!--                {{#foto_perfil}}-->
<!--                <img src="/{{foto_perfil}}" alt="{{usuario}}" class="img-fluid rounded-circle" width="50" height="50">-->
<!--                {{/foto_perfil}}-->

                {{#foto_perfil}}
                    <img alt="{{usuario}}" class="img-fluid rounded-circle" width="50" height="50">
                {{/foto_perfil}}
                {{^foto_perfil}}
                <img src="/public/imagenes/usuarioImagenDefault.png" alt="{{usuario}}" class="img-fluid rounded-circle" width="50" height="50">
                {{/foto_perfil}}        
            </div>
            <div class="col-md-4">{{nombre_completo}}</div>
            <div class="col-md-4 text-muted small">{{mejor_puntaje}}</div>
            <div class="col-md-4 text-muted small">{{pais}}</div>
        </a>
    </div>
    {{/usuarios}}

    {{^usuarios}}
    <div class="alert alert-secondary text-center text-light bg-dark border-light">
        No hay usuarios registrados.
    </div>
    {{/usuarios}}
    </div>


    <div class="text-center mt-5">
      <a href="/inicio" class="btn btn-secondary">Volver</a>
    </div>
  </main>
</body>
</html>