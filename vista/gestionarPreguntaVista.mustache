<title>Gestionar Preguntas</title>
<link rel="stylesheet" href="/public/css/paginaPrincipalStyle.css">
</head>

  <main class="container my-4">
    <div class="text-center mb-4">
      <h1 class="fw-bold">Gestionar Preguntas</h1>
      <p class="text-muted">
        ¡Acá podés gestionar preguntas! Ver si tiene reportes, eliminarla, editarla o, si es una pregunta sugerida, agregarla.
      </p>
    </div>

    <div class="bg-dark border border-secondary rounded p-4">
    <!--
    Dejen espacios entre corcheas a la hora de comentar porque sino mustache trata de leerlo y te explota
        Mini guia de como funciona esto en mustache:    
            { {#variable} }{ {/variable} } -> Solo si la variable existe y no esta vacia -> Itera por item
            { {#is_variable} } { {/variable} } -> if la variable es true (bool)
            { {^is_variable} } { {/variable} } -> if la variable es false (bool)
    -->
          {{#pregunta}}
        <h2 class="h4 text-info">{{descripcion}}</h2>

        {{#tipo}}
          {{#is_sugerida}}
            <p class="mb-3 text-warning"><strong>Tipo:</strong> Pregunta sugerida</p>
          {{/is_sugerida}}
          {{^is_sugerida}}
            <p class="mb-3 text-success"><strong>Tipo:</strong> Pregunta activa</p>
          {{/is_sugerida}}
        {{/tipo}}
      {{/pregunta}}

      <ul class="list-group list-group-flush mb-4">
        {{#respuestas}}
          <li class="list-group-item bg-secondary text-light border border-dark d-flex justify-content-between align-items-center">
            <span>{{descripcion}}</span>
            {{#es_correcta}}
              <span class="badge bg-success">Correcta</span>
            {{/es_correcta}}
          </li>
        {{/respuestas}}
      </ul>

      {{#reports}}
        <hr class="border-secondary">
        <h4 class="text-danger">Reportes ({{cantidad}})</h4>
        <ul class="list-group list-group-flush mb-3">
          {{#reportes}}
            <li class="list-group-item bg-secondary text-light border border-dark">
              <strong>{{usuario}}:</strong> {{descripcion}}
            </li>
          {{/reportes}}
        </ul>
      {{/reports}}

    <!--
        De momento no se pueden editar las sugerencias. Me parecio too much
        Y las preguntas activas que fueron sugerencias anteriormente, no guardan la info del usuairo que las sugirio inicialmente, Les parece dejarlo asi?
        Tampoco hay preguntas "inactivas", ni una cant de reportes hecho por un usuairo en particular. A tener en cuenta! 
    
        Cada link vuelve a llamar a esta vista pero pasando por url la funcion que se debe realizar 
    -->

    <div class="d-flex flex-wrap gap-2 mt-4">
        {{#tipo}}
          {{#is_sugerida}}
            <a href="/gestionarPregunta?id={{pregunta_id}}&action=aceptar_sugerencia" class="btn btn-success">
                Aceptar sugerencia
            </a>

            <a href="/gestionarPregunta?id={{pregunta_id}}&action=rechazar_sugerencia" class="btn btn-danger">
              Rechazar sugerencia
            </a>
          {{/is_sugerida}}

          {{^is_sugerida}}
            <a href="/gestionarPregunta?id={{pregunta_id}}&action=editar" class="btn btn-secondary disabled">
              Editar pregunta
            </a>

            <a href="/gestionarPregunta?id={{pregunta_id}}&action=eliminar" class="btn btn-danger">
              Eliminar pregunta
            </a>

            {{#reports}}
              <a href="/gestionarPregunta?id={{pregunta_id}}&action=rechazar_reportes" class="btn btn-danger">
                Desestimar reportes
              </a>
            {{/reports}}
          {{/is_sugerida}}
        {{/tipo}}

        <a href="{{actions.volver}}" class="btn btn-secondary">
          <i class="bi bi-arrow-left me-1"></i> Volver
        </a>
      </div>
    </div>